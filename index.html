<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Daily Training Checklist</title>
<style>
  :root { --bg: #0b0c10; --panel: #16181d; --text: #e9eef8; --muted: #9aa4b2; --accent: #7cc4ff; --accent2: #9bffa0; --danger: #ffb2b2;}
  * { box-sizing: border-box; }
  body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text);}
  a { color: var(--accent); text-decoration: none; }
  .container { max-width: 960px; margin: 0 auto; padding: 24px; }
  header { display: flex; align-items: center; justify-content: space-between; gap: 16px; margin-bottom: 16px; }
  h1 { font-size: 24px; margin: 0; letter-spacing: .3px;}
  .controls { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
  select, button, input[type="checkbox"] { accent-color: var(--accent); }
  select, button { background: var(--panel); color: var(--text); border: 1px solid #2a2f3a; border-radius: 10px; padding: 8px 12px; }
  button.primary { background: linear-gradient(180deg, #1e88e5, #1565c0); border: none; }
  button:disabled { opacity: .6; }
  .panel { background: var(--panel); border: 1px solid #222833; border-radius: 16px; padding: 16px; margin-top: 16px; }
  .today { display: grid; grid-template-columns: 1fr; gap: 12px; }
  .today-header { display:flex; justify-content: space-between; align-items: center; gap: 12px; }
  .kpis { display:flex; gap: 16px; flex-wrap: wrap; }
  .kpi { background: #111319; border: 1px solid #202635; padding: 8px 12px; border-radius: 12px; font-size: 13px; color: var(--muted); }
  .kpi strong { color: var(--text); }
  .workout-text pre { white-space: pre-wrap; font-family: inherit; margin: 8px 0 0; }
  .list { margin-top: 8px; }
  .day { display:flex; align-items: start; gap: 12px; padding: 10px 8px; border-radius: 12px; border: 1px solid #252b37; margin-bottom: 8px; background: #12151c; }
  .day.done { opacity: .65; }
  .date { width: 120px; color: var(--muted); font-size: 12px; }
  .title { font-weight: 600; }
  .meta { color: var(--muted); font-size: 12px; }
  .grow { flex: 1; }
  .progress { height: 10px; border-radius: 6px; background: #0f1218; border: 1px solid #222836; overflow: hidden; }
  .bar { height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent2)); width: 0%; transition: width .25s ease; }
  .footer { color: var(--muted); font-size: 12px; margin-top: 16px;}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>Daily Training Checklist</h1>
    <div class="controls">
      <label>Week
        <select id="weekSelect"></select>
      </label>
      <button id="todayBtn" class="primary">Jump to Today</button>
      <button id="resetBtn" title="Clear completion for the selected week">Reset Week</button>
    </div>
  </header>

  <div class="panel today">
    <div class="today-header">
      <div>
        <div id="todayTitle" class="title"></div>
        <div id="todayMeta" class="meta"></div>
      </div>
      <label><input type="checkbox" id="todayDone"/> Completed</label>
    </div>
    <div class="kpis">
      <div class="kpi">Phase: <strong id="todayPhase"></strong></div>
      <div class="kpi">Week mileage: <strong id="todayMileage"></strong> mi</div>
      <div class="kpi">Progress: <strong id="progressText"></strong></div>
    </div>
    <div class="workout-text">
      <div><strong>Workout</strong><pre id="todayWorkout"></pre></div>
      <div><strong>Warm-up</strong><pre id="todayWarmup"></pre></div>
      <div><strong>Cool-down</strong><pre id="todayCooldown"></pre></div>
    </div>
    <div class="progress"><div class="bar" id="progressBar"></div></div>
  </div>

  <div class="panel">
    <h3 style="margin-top:0">This Week</h3>
    <div id="weekList" class="list"></div>
  </div>

  <div class="footer">Data stored locally on this device with <code>localStorage</code>. You can safely refresh or go offline.</div>
</div>

<!-- Embedded plan data -->
<script id="workouts" type="application/json">
[
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-12",
    "day": "Tue",
    "workout": "Run/Walk: 1:2 min x 6–8 rounds (3 mi max)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/...cles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; ... L/R; Bent-Knee Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-13",
    "day": "Wed",
    "workout": "Strength & Mobility (30–40 min) — Bodyweight circuit: Squats, Lunges, Push-ups, Planks",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-14",
    "day": "Thu",
    "workout": "Easy Run: 2 mi conversational pace",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-15",
    "day": "Fri",
    "workout": "Rest or Cross-Train (30 min) — bike, swim, or brisk walk",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-16",
    "day": "Sat",
    "workout": "Long Run/Walk: 3 mi easy effort",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-17",
    "day": "Sun",
    "workout": "Recovery Walk: 20–30 min, optional mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 1,
    "phase": "Recovery & Base",
    "date": "2025-08-18",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 5
  },
  {
    "week": 2,
    "phase": "Recovery & Base",
    "date": "2025-08-19",
    "day": "Tue",
    "workout": "Run/Walk: 2:2 min x 6–8 rounds (3–4 mi max)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 2,
    "phase": "Recovery & Base",
    "date": "2025-08-20",
    "day": "Wed",
    "workout": "Strength & Mobility (35–45 min) — add core focus",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 2,
    "phase": "Recovery & Base",
    "date": "2025-08-21",
    "day": "Thu",
    "workout": "Easy Run: 2.5 mi",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 2,
    "phase": "Recovery & Base",
    "date": "2025-08-22",
    "day": "Fri",
    "workout": "Rest or Cross-Train (30–40 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 2,
    "phase": "Recovery & Base",
    "date": "2025-08-23",
    "day": "Sat",
    "workout": "Long Run: 4 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 2,
    "phase": "Recovery & Base",
    "date": "2025-08-24",
    "day": "Sun",
    "workout": "Recovery Walk: 25–35 min",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 2,
    "phase": "Build Phase",
    "date": "2025-08-25",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 6
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-08-26",
    "day": "Tue",
    "workout": "Run: 3 mi with last 5×30s pickups",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-08-27",
    "day": "Wed",
    "workout": "Strength (40–45 min) + mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-08-28",
    "day": "Thu",
    "workout": "Easy Run: 3 mi",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-08-29",
    "day": "Fri",
    "workout": "Rest or Cross-Train (35–45 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-08-30",
    "day": "Sat",
    "workout": "Long Run: 5 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-08-31",
    "day": "Sun",
    "workout": "Recovery Walk: 25–35 min + light mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 3,
    "phase": "Build Phase",
    "date": "2025-09-01",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 15
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-02",
    "day": "Tue",
    "workout": "Run: 3.5 mi with 6×45s pickups",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-03",
    "day": "Wed",
    "workout": "Strength (45 min) — add single-leg work",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-04",
    "day": "Thu",
    "workout": "Easy Run: 3 mi + strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-05",
    "day": "Fri",
    "workout": "Rest or Cross-Train (40–45 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-06",
    "day": "Sat",
    "workout": "Long Run: 5.5 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-07",
    "day": "Sun",
    "workout": "Recovery Walk: 30 min + mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 4,
    "phase": "Build Phase",
    "date": "2025-09-08",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 16
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-09",
    "day": "Tue",
    "workout": "Run: 4 mi with 6×60s pickups",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-10",
    "day": "Wed",
    "workout": "Strength (45–50 min) — include hips & glutes",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-11",
    "day": "Thu",
    "workout": "Easy Run: 3.5 mi + strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-12",
    "day": "Fri",
    "workout": "Rest or Cross-Train (40–50 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-13",
    "day": "Sat",
    "workout": "Long Run: 6 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-14",
    "day": "Sun",
    "workout": "Recovery Walk: 30–35 min + mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 5,
    "phase": "Build Phase",
    "date": "2025-09-15",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-16",
    "day": "Tue",
    "workout": "Run: 4.5 mi with 6×60s pickups",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-17",
    "day": "Wed",
    "workout": "Strength (45–50 min) — add single-leg RDLs",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-18",
    "day": "Thu",
    "workout": "Easy Run: 3.5–4 mi + strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-19",
    "day": "Fri",
    "workout": "Rest or Cross-Train (40–50 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-20",
    "day": "Sat",
    "workout": "Long Run: 6.5 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-21",
    "day": "Sun",
    "workout": "Recovery Walk: 30–35 min + mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 6,
    "phase": "Build Phase",
    "date": "2025-09-22",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 19
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-23",
    "day": "Tue",
    "workout": "Tempo Intro: 1 mi easy + 2×8 min comfortably hard (2 min easy) + easy to 4.5 mi",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-24",
    "day": "Wed",
    "workout": "Strength (45–50 min) — maintain",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-25",
    "day": "Thu",
    "workout": "Easy Run: 4 mi + strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-26",
    "day": "Fri",
    "workout": "Rest or Cross-Train (40–50 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-27",
    "day": "Sat",
    "workout": "Long Run: 7 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-28",
    "day": "Sun",
    "workout": "Recovery Walk: 30–35 min + mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 7,
    "phase": "Build Phase",
    "date": "2025-09-29",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 20
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-09-30",
    "day": "Tue",
    "workout": "Tempo: 1 mi easy + 2×10 min comfortably hard (3 min easy) + easy to 5 mi",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-10-01",
    "day": "Wed",
    "workout": "Strength (45–50 min) — maintain",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-10-02",
    "day": "Thu",
    "workout": "Easy Run: 4 mi + strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-10-03",
    "day": "Fri",
    "workout": "Rest or Cross-Train (45–50 min)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-10-04",
    "day": "Sat",
    "workout": "Long Run: 8 mi easy",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-10-05",
    "day": "Sun",
    "workout": "Recovery Walk: 35–40 min + mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 8,
    "phase": "Peak Phase",
    "date": "2025-10-06",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 22
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-07",
    "day": "Tue",
    "workout": "Run: 4.5 mi with 8×30s race-pace strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-08",
    "day": "Wed",
    "workout": "Strength (40 min) — reduce volume",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-09",
    "day": "Thu",
    "workout": "Easy Run: 3.5 mi",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-10",
    "day": "Fri",
    "workout": "Rest or Shakeout (easy 20 min walk)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-11",
    "day": "Sat",
    "workout": "Long Run: 6 mi relaxed (include 2 mi at goal pace)",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-12",
    "day": "Sun",
    "workout": "Recovery Walk: 30–35 min + light mobility",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 9,
    "phase": "Taper",
    "date": "2025-10-13",
    "day": "Mon",
    "workout": "Rest Day",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 18
  },
  {
    "week": 10,
    "phase": "Race Week",
    "date": "2025-10-14",
    "day": "Tue",
    "workout": "Tune-up: 2 mi easy + 4×20s race-pace strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 4
  },
  {
    "week": 10,
    "phase": "Race Week",
    "date": "2025-10-15",
    "day": "Wed",
    "workout": "Rest or 20–25 min walk",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 4
  },
  {
    "week": 10,
    "phase": "Race Week",
    "date": "2025-10-16",
    "day": "Thu",
    "workout": "Shakeout: 2 mi very easy + 4×15s strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; Hamstring Stretch L/R; Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 4
  },
  {
    "week": 10,
    "phase": "Race Week",
    "date": "2025-10-17",
    "day": "Fri",
    "workout": "Rest, hydrate, carb-focus",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Gentle stretch, early night",
    "weeklyMileage": 4
  },
  {
    "week": 10,
    "phase": "Race Week",
    "date": "2025-10-18",
    "day": "Sat",
    "workout": "Shakeout: 15–20 min jog + 4×10s strides",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/leg; Arm Circles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Light stretch, lay out gear",
    "weeklyMileage": 4
  },
  {
    "week": 10,
    "phase": "Race Week",
    "date": "2025-10-19",
    "day": "Sun",
    "workout": "RACE DAY – Half Marathon!",
    "warmup": "Walking Quad Pull 10/leg; Leg Swings front/back 10/...cles 5 each way; Calf Rock-Backs 10/leg; Glute Bridges 10 reps",
    "cooldown": "Standing Quad Stretch L/R; Figure-4 Stretch L/R; ... L/R; Bent-Knee Calf Stretch L/R; Hip Flexor Lunge Stretch L/R",
    "weeklyMileage": 4
  }
]
</script>

<script>
(function(){
  const data = JSON.parse(document.getElementById('workouts').textContent);
  const weekSelect = document.getElementById('weekSelect');
  const weekList = document.getElementById('weekList');
  const todayBtn = document.getElementById('todayBtn');
  const resetBtn = document.getElementById('resetBtn');

  const todayTitle = document.getElementById('todayTitle');
  const todayMeta = document.getElementById('todayMeta');
  const todayPhase = document.getElementById('todayPhase');
  const todayMileage = document.getElementById('todayMileage');
  const todayWorkout = document.getElementById('todayWorkout');
  const todayWarmup = document.getElementById('todayWarmup');
  const todayCooldown = document.getElementById('todayCooldown');
  const todayDone = document.getElementById('todayDone');
  const progressText = document.getElementById('progressText');
  const progressBar = document.getElementById('progressBar');

  const byWeek = groupBy(data, x => x.week);
  const weeks = Object.keys(byWeek).map(Number).sort((a,b)=>a-b);

  // populate weeks
  for (const w of weeks) {
    const opt = document.createElement('option');
    opt.value = String(w);
    opt.textContent = `Week ${w}`;
    weekSelect.appendChild(opt);
  }

  // choose initial week: today's week if in plan; else first
  const todayISO = new Date().toISOString().slice(0,10);
  const todayIdx = data.findIndex(d => d.date === todayISO);
  const initialWeek = todayIdx >= 0 ? data[todayIdx].week : weeks[0];
  weekSelect.value = String(initialWeek);

  renderWeek();
  renderToday(todayIdx >= 0 ? todayIdx : data.findIndex(d=>d.week==initialWeek));

  // events
  weekSelect.addEventListener('change', ()=>{
    renderWeek();
    const firstOfWeek = data.findIndex(d => d.week == Number(weekSelect.value));
    renderToday(firstOfWeek);
  });

  todayBtn.addEventListener('click', ()=>{
    const idx = data.findIndex(d => d.date === todayISO);
    if (idx >= 0) {
      weekSelect.value = String(data[idx].week);
      renderWeek();
      scrollToDay(data[idx].date);
      renderToday(idx);
    } else {
      alert('Today is not inside this plan. Showing the closest week.');
      const closest = closestIndexByDate(data, new Date());
      weekSelect.value = String(data[closest].week);
      renderWeek();
      scrollToDay(data[closest].date);
      renderToday(closest);
    }
  });

  resetBtn.addEventListener('click', ()=>{
    if (!confirm('Clear completion for all days in this week?')) return;
    const w = Number(weekSelect.value);
    for (const d of byWeek[w]) setDone(d.date, false);
    renderWeek(); updateProgress(); renderToday(data.findIndex(d=>d.date===document.querySelector('.day[data-today]').dataset.date));
  });

  todayDone.addEventListener('change', ()=>{
    const date = todayDone.dataset.date;
    setDone(date, todayDone.checked);
    // update the corresponding row checkbox
    const row = document.querySelector(`.day input[type=checkbox][data-date="${cssEscape(date)}"]`);
    if (row) row.checked = todayDone.checked, row.closest('.day').classList.toggle('done', todayDone.checked);
    updateProgress();
  });

  function renderWeek(){
    weekList.innerHTML = '';
    const w = Number(weekSelect.value);
    for (const d of byWeek[w]) {
      const li = document.createElement('div');
      li.className = 'day';
      li.dataset.date = d.date;
      const checked = getDone(d.date);
      if (checked) li.classList.add('done');
      const checkbox = document.createElement('input');
      checkbox.type = 'checkbox';
      checkbox.checked = checked;
      checkbox.dataset.date = d.date;
      checkbox.addEventListener('change', ()=>{
        setDone(d.date, checkbox.checked);
        li.classList.toggle('done', checkbox.checked);
        if (todayDone.dataset.date === d.date) todayDone.checked = checkbox.checked;
        updateProgress();
      });

      const date = document.createElement('div');
      date.className = 'date';
      date.textContent = formatDate(d.date);

      const main = document.createElement('div');
      main.className = 'grow';
      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = d.workout;
      const meta = document.createElement('div');
      meta.className = 'meta';
      meta.textContent = `${d.day} • ${d.phase}`;
      main.append(title, meta);

      li.append(checkbox, date, main);
      weekList.append(li);
    }
    updateProgress();
  }

  function renderToday(idx){
    const d = data[idx];
    document.querySelectorAll('.day').forEach(el=>el.removeAttribute('data-today'));
    const row = document.querySelector(`.day input[type=checkbox][data-date="${cssEscape(d.date)}"]`);
    if (row) row.closest('.day').setAttribute('data-today','true');

    todayTitle.textContent = `${formatDate(d.date)} • Week ${d.week}`;
    todayMeta.textContent = `${d.day} — ${d.phase}`;
    todayPhase.textContent = d.phase;
    todayMileage.textContent = d.weeklyMileage ?? '';
    todayWorkout.textContent = d.workout;
    todayWarmup.textContent = d.warmup;
    todayCooldown.textContent = d.cooldown;
    todayDone.checked = getDone(d.date);
    todayDone.dataset.date = d.date;
  }

  function updateProgress(){
    const w = Number(weekSelect.value);
    const days = byWeek[w];
    const done = days.reduce((acc, d)=> acc + (getDone(d.date)?1:0), 0);
    const pct = Math.round((done / days.length) * 100);
    progressText.textContent = `${done}/${days.length} (${pct}%)`;
    progressBar.style.width = pct + '%';
  }

  // storage helpers
  function key(date){ return 'workoutDone:' + date; }
  function getDone(date){ return localStorage.getItem(key(date)) === '1'; }
  function setDone(date, val){ localStorage.setItem(key(date), val ? '1' : '0'); }

  // utils
  function formatDate(iso){
    const d = new Date(iso+'T00:00:00');
    return d.toLocaleDateString(undefined, {year:'numeric', month:'short', day:'numeric'});
  }
  function groupBy(arr, f){
    return arr.reduce((acc, x)=>{ const k=f(x); (acc[k]=acc[k]||[]).push(x); return acc; },{});
  }
  function closestIndexByDate(arr, target){
    const t = target.getTime();
    let bestIdx = 0, bestDiff = Infinity;
    for (let i=0;i<arr.length;i++){ const diff = Math.abs(new Date(arr[i].date).getTime() - t); if (diff < bestDiff) bestDiff = diff, bestIdx = i; }
    return bestIdx;
  }
  // polyfill safer selector
  function cssEscape(s){ return s.replace(/["\\\\]/g, "\\\\$&"); }

})();
</script>
</body></html>
